/// <reference types="node" />
import { Events } from "src/db/entities/Events";
import { Notifications } from "src/db/entities/Notifications";
import { Users } from "src/db/entities/Users";
import { Repository, EntityManager } from "typeorm";
import { OneSignalNotificationService } from "./one-signal-notification.service";
import { CreateAssistanceEventDto, CreateCharityVolunteerEventDto, CreateDonationEventDto } from "src/core/dto/events/events.create.dto";
import { UpdateCharityVolunteerEventDto, UpdateDonationEventDto, UpdateAssistanceEventDto, UpdateEventStatusDto, UpdateEventInterestedDto, UpdateEventRespondedDto } from "src/core/dto/events/events.update.dto";
import { Interested } from "src/db/entities/Interested";
import { Responded } from "src/db/entities/Responded";
import { FirebaseProvider } from "src/core/provider/firebase/firebase-provider";
import { Files } from "src/db/entities/Files";
import { EventImage } from "src/db/entities/EventImage";
import { EventMessage } from "src/db/entities/EventMessage";
import { UserConversation } from "src/db/entities/UserConversation";
import { Transactions } from "src/db/entities/Transactions";
export declare class EventsService {
    private readonly eventRepo;
    private readonly userConversationRepo;
    private readonly notificationsRepo;
    private readonly transactionsRepo;
    private firebaseProvoder;
    private oneSignalNotificationService;
    constructor(eventRepo: Repository<Events>, userConversationRepo: Repository<UserConversation>, notificationsRepo: Repository<Notifications>, transactionsRepo: Repository<Transactions>, firebaseProvoder: FirebaseProvider, oneSignalNotificationService: OneSignalNotificationService);
    getPagination({ pageSize, pageIndex, order, columnDef }: {
        pageSize: any;
        pageIndex: any;
        order: any;
        columnDef: any;
    }): Promise<{
        results: {
            eventImages: EventImage[];
            interested: number;
            responded: number;
            raisedDonation: number;
            eventId: string;
            eventCode: string;
            dateTime: Date;
            eventType: string;
            eventName: string;
            eventDesc: string;
            eventLocName: string;
            eventLocMap: object;
            eventAssistanceItems: string[];
            eventStatus: string;
            active: boolean;
            transferType: string;
            transferAccountNumber: string;
            transferAccountName: string;
            donationTargetAmount: string;
            inProgress: boolean;
            dateTimeUpdate: Date;
            eventMessages: EventMessage[];
            thumbnailFile: Files;
            user: Users;
            interesteds: Interested[];
            respondeds: Responded[];
            transactions: Transactions[];
        }[];
        total: number;
    }>;
    getByCode(eventCode?: string, currentUserCode?: string): Promise<{
        visitorUnReadMessage: number;
        interested: any;
        responded: any;
        raisedDonation: any;
        isCurrentUserResponded: boolean;
        isCurrentUserInterested: boolean;
        visitorUserConversation: any;
        visitorUserDonation: number;
        ownerUnReadNotifications: number;
        ownerUnReadMessage: number;
        ownerUnReadNotif: number;
        eventId: string;
        eventCode: string;
        dateTime: Date;
        eventType: string;
        eventName: string;
        eventDesc: string;
        eventLocName: string;
        eventLocMap: object;
        eventAssistanceItems: string[];
        eventStatus: string;
        active: boolean;
        transferType: string;
        transferAccountNumber: string;
        transferAccountName: string;
        donationTargetAmount: string;
        inProgress: boolean;
        dateTimeUpdate: Date;
        eventImages: EventImage[];
        eventMessages: EventMessage[];
        thumbnailFile: Files;
        user: Users;
        interesteds: Interested[];
        respondeds: Responded[];
        transactions: Transactions[];
    }>;
    getPageJoinedEvents({ pageSize, pageIndex, order, userCode }: {
        pageSize: any;
        pageIndex: any;
        order: any;
        userCode: any;
    }): Promise<{
        results: Events[];
        total: number;
    }>;
    getPageInterestedEvents({ pageSize, pageIndex, order, userCode }: {
        pageSize: any;
        pageIndex: any;
        order: any;
        userCode: any;
    }): Promise<{
        results: Events[];
        total: number;
    }>;
    getEventThumbnailFile(eventCode?: string): Promise<Files>;
    getEventThumbnailContent(path?: string): Promise<Buffer>;
    createCharityVolunteerEvent(dto: CreateCharityVolunteerEventDto): Promise<Events>;
    createDonationEvent(dto: CreateDonationEventDto): Promise<Events>;
    createAssistanceEvent(dto: CreateAssistanceEventDto): Promise<Events>;
    updateCharityVolunteerEvent(eventCode: any, dto: UpdateCharityVolunteerEventDto): Promise<Events>;
    updateDonationEvent(eventCode: any, dto: UpdateDonationEventDto): Promise<Events>;
    updateAssistanceEvent(eventCode: any, dto: UpdateAssistanceEventDto): Promise<Events>;
    updateStatus(eventCode: any, dto: UpdateEventStatusDto): Promise<Events>;
    updateEventInterested(eventCode: any, dto: UpdateEventInterestedDto): Promise<{
        interested: number;
        eventId: string;
        eventCode: string;
        dateTime: Date;
        eventType: string;
        eventName: string;
        eventDesc: string;
        eventLocName: string;
        eventLocMap: object;
        eventAssistanceItems: string[];
        eventStatus: string;
        active: boolean;
        transferType: string;
        transferAccountNumber: string;
        transferAccountName: string;
        donationTargetAmount: string;
        inProgress: boolean;
        dateTimeUpdate: Date;
        eventImages: EventImage[];
        eventMessages: EventMessage[];
        thumbnailFile: Files;
        user: Users;
        interesteds: Interested[];
        respondeds: Responded[];
        transactions: Transactions[];
    }>;
    updateEventResponded(eventCode: any, dto: UpdateEventRespondedDto): Promise<{
        responded: number;
        eventId: string;
        eventCode: string;
        dateTime: Date;
        eventType: string;
        eventName: string;
        eventDesc: string;
        eventLocName: string;
        eventLocMap: object;
        eventAssistanceItems: string[];
        eventStatus: string;
        active: boolean;
        transferType: string;
        transferAccountNumber: string;
        transferAccountName: string;
        donationTargetAmount: string;
        inProgress: boolean;
        dateTimeUpdate: Date;
        eventImages: EventImage[];
        eventMessages: EventMessage[];
        thumbnailFile: Files;
        user: Users;
        interesteds: Interested[];
        respondeds: Responded[];
        transactions: Transactions[];
    }>;
    saveEventImages(entityManager: EntityManager, event: Events, eventImages?: any[]): Promise<void>;
    logNotification(userIds: string[], data: Events, entityManager: EntityManager, title: string, description: string): Promise<Notifications[]>;
}
